CREATE OR REPLACE TRIGGER insert_corp_into_owns
AFTER INSERT 
ON STOCK 
FOR EACH ROW 
BEGIN
IF :NEW.AVAILABLE_LOTS IS NOT NULL AND :NEW.LOT IS NOT NULL THEN 
	INSERT INTO OWNS VALUES(:NEW.CORP_ID,:NEW.SYMBOL,:NEW.AVAILABLE_LOTS*:NEW.LOT);
END IF;
END;
/ 

CREATE OR REPLACE TRIGGER update_quantity_of_stock
AFTER UPDATE OF AVAILABLE_LOTS,LOT 
ON STOCK 
FOR EACH ROW
BEGIN 
UPDATE OWNS 
SET QUANTITY = :NEW.AVAILABLE_LOTS*:NEW.LOT 
WHERE USER_ID = :NEW.CORP_ID AND SYMBOL = :NEW.SYMBOL;
END;
/


