CREATE OR REPLACE PROCEDURE IS_PREM(USID IN NUMBER,FLAG OUT CHAR)IS 
-- T IF PREM, F IF NOT PREM AND N IF NO USER FOUND
TYP VARCHAR2(20);
RF_COUNT NUMBER;
BEGIN
	FLAG := 'N';
	SELECT "TYPE" INTO TYP FROM "USER" WHERE USER_ID = USID;
	IF TYP = 'Admin' THEN
		FLAG := 'T';
	ELSIF TYP = 'Customer' THEN
		SELECT REFER_COUNT INTO RF_COUNT FROM CUSTOMER WHERE USER_ID = USID;
		IF RF_COUNT >= 4 THEN 
			FLAG := 'T';
		ELSE 
			FLAG := 'F';
		END IF;
	ELSIF TYP = 'Broker' THEN 
		FLAG := 'F';
	ELSIF TYP = 'Corp' THEN 
		FLAG := 'F';
	ELSE 
		FLAG := 'N';
	END IF;
EXCEPTION
	WHEN OTHERS THEN 
		FLAG := 'N';
END;